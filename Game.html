<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì—Ä–∞ ‚Äî –®–ª—è—Ö –∑—Ä—ñ–ª–æ—Å—Ç—ñ</title>
  <link rel="stylesheet" href="game.css" />
  <style>
    .locked {
      color: gray;
      cursor: not-allowed;
    }
    .active {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2>–î–Ω—ñ –≥—Ä–∏</h2>
      <ul id="daysList"></ul>
    </aside>
    <main class="content">
      <h1 id="dayTitle"></h1>
      <p id="dayContent"></p>
      <div id="dayAssets"></div>
    </main>
  </div>

  <script>
    const titles = {
      1: "‚ú® –î–ï–ù–¨ 1 ‚Äì –¢–æ—á–∫–∞ –ê",
      2: "üìå –î–ï–ù–¨ 2. –¢–í–û–á –¶–Ü–ù–ù–û–°–¢–Ü ‚Äì –¢–í–û–Ø –°–£–ü–ï–†–°–ò–õ–ê!",
      3: "üìå –î–ï–ù–¨ 3. –î–û–†–û–°–õ–Ü–°–¢–¨ ‚Äì –¶–ï –°–ú–Ü–õ–ò–í–Ü–°–¢–¨ –ë–£–¢–ò –°–û–ë–û–Æ",
      4: "üìå –î–ï–ù–¨ 4. –ü–ï–†–ï–ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –¢–ê –ü–Ü–î–°–£–ú–ö–ò –ë–õ–û–ö–£",
      5: "üìå –î–ï–ù–¨ 5. –¢–í–û–á –ï–ú–û–¶–Ü–á ‚Äì –¶–ï –¢–í–û–á –Ü–ù–°–¢–†–£–ú–ï–ù–¢–ò",
      6: "üìå –î–ï–ù–¨ 6. –ü–†–ò–†–£–ß–ò –°–í–û–á –ï–ú–û–¶–Ü–á: –°–¢–ê–ë–Ü–õ–¨–ù–Ü–°–¢–¨ –ù–ê –ú–ê–ö–°–ò–ú–ê–õ–ö–ê–•",
      7: "üìå –î–ï–ù–¨ 7. –ï–ú–û–¶–Ü–ô–ù–Ü –ö–û–†–î–û–ù–ò ‚Äì –ù–ê–í–ß–ò–°–Ø –ö–ê–ó–ê–¢–ò ¬´–ù–Ü¬ª –ß–£–ñ–ò–ú –°–¢–ê–ù–ê–ú",
      8: "üìå –î–ï–ù–¨ 8. –î–ï–ù–¨ –†–ï–§–õ–ï–ö–°–Ü–á: –ï–ú–û–¶–Ü–ô–ù–ê –ê–í–¢–û–ù–û–ú–Ü–Ø",
      9: "üìå –î–ï–ù–¨ 9. –§–Ü–ù–ê–ù–°–û–í–ò–ô –°–¶–ï–ù–ê–†–Ü–ô: –ù–ê –©–û –¢–ò –ó–ê–ü–†–û–ì–†–ê–ú–û–í–ê–ù–ò–ô(-–ê)?",
      10: "üìå –î–ï–ù–¨ 10. –ì–†–û–®–Ü = –í–Ü–î–ü–û–í–Ü–î–ê–õ–¨–ù–Ü–°–¢–¨",
      11: "üìå –î–ï–ù–¨ 11. –¢–ò –ö–ï–†–£–Ñ–® –ì–†–û–®–ò–ú–ê, –ê –ù–ï –í–û–ù–ò –¢–û–ë–û–Æ",
      12: "üìå –î–ï–ù–¨ 12. –¢–ò –í–ó–Ø–í(-–õ–ê) –ö–û–ù–¢–†–û–õ–¨ –ù–ê–î –ì–†–û–®–ò–ú–ê! üî•",
      13: "üìå –î–ï–ù–¨ 13. –¶–ï –ù–ï –Ø, –¶–ï –ó–Ü–†–ö–ò‚Ä¶",
      14: "üìå –î–ï–ù–¨ 14. –Ø –í–ò–†–Ü–®–£–Æ, –ê –ù–ï –ó–ê–í–ò–°–ê–Æ",
      15: "üìå –î–ï–ù–¨ 15. –í–Ü–î–ü–û–í–Ü–î–ê–õ–¨–ù–Ü–°–¢–¨ ‚â† –°–ê–ú–û–ü–û–ñ–ï–†–¢–í–ê",
      16: "üìå –î–ï–ù–¨ 16. –ó–ê–ü–ê–ö–£–ô –°–í–Ü–ô –í–ò–ë–Ü–† –£ –°–ò–õ–£",
      17: "üìå –î–ï–ù–¨ 17. –¢–Ø–ì–ù–£ –¢–ï–ë–ï, –ê–ë–û –õ–Æ–ë–õ–Æ?",
      18: "üìå –î–ï–ù–¨ 18. –ú–û–ñ–ù–ê –ù–ï –í–Ü–î–ö–†–ò–í–ê–¢–ò –î–í–ï–†–Ü‚Ä¶",
      19: "üìå –î–ï–ù–¨ 19. –ó–†–Ü–õ–ê –ö–û–ú–£–ù–Ü–ö–ê–¶–Ü–Ø",
      20: "üìå –î–ï–ù–¨ 20. –°–¢–û–°–£–ù–ö–ò, –Ø–ö–Ü –ù–ï –°–¢–ò–†–ê–Æ–¢–¨ –ú–ï–ù–ï",
      21: "üìå –î–ï–ù–¨ 21. –¢–Ü–õ–û ‚Äî –¶–ï –ù–ï –£–ü–ê–ö–û–í–ö–ê‚Ä¶",
      22: "üìå –î–ï–ù–¨ 22. –ó–í–ò–ß–ö–ò, –Ø–ö–Ü –ü–Ü–î–ñ–ò–í–õ–Æ–Æ–¢–¨",
      23: "üìå –î–ï–ù–¨ 23. –ö–£–î–ò –ó–ù–ò–ö–ê–Ñ –ú–û–Ø –ï–ù–ï–†–ì–Ü–Ø?",
      24: "üìå –î–ï–ù–¨ 24. –Ø –ë–Ü–õ–¨–®–ï –ù–ï –ñ–ò–í–£, –Ø–ö –ó–ê–†–Ø–î–ö–ê –ù–ê 1%",
      25: "üìå –î–ï–ù–¨ 25. –ü–õ–ê–ù –í–ü–ê–í. –Ø ‚Äì –ù–Ü.",
      26: "üìå –î–ï–ù–¨ 26. –ö–û–õ–ò –í–°–ï –†–û–ó–°–ò–ü–ê–Ñ–¢–¨–°–Ø‚Ä¶",
      27: "üìå –î–ï–ù–¨ 27. –ù–ï –¢–Ü–õ–¨–ö–ò –í–ò–¢–†–ò–ú–ê–¢–ò, –ê –ô –ñ–ò–¢–ò",
      28: "üìå –î–ï–ù–¨ 28. –ö–û–õ–ò –ù–ê–ö–†–ò–í–ê–Ñ‚Ä¶",
      29: "üìå –î–µ–Ω—å 29 ‚Äî –Ø –±–∞—á—É —Å–≤—ñ–π —à–ª—è—Ö",
      30: "üéØ –î–ï–ù–¨ 30 ‚Äî –¢–û–ß–ö–ê –ë",
      31: "üåô –í–µ—á—ñ—Ä–Ω—î –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è ‚Äì –î–µ–Ω—å 3"
    };

    const photoDays = [2, 25];
    const audioDays = [2, 3, 5, 6, 7, 9, 10, 11, 13, 14, 15, 18, 19, 21, 25, 27];
    const pdfDays = [3, 5, 6, 7, 9, 11, 14, 15, 17, 18, 19, 21, 22, 23, 27, 29];

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã
    const startDate = localStorage.getItem("gameStartDate") 
      ? new Date(localStorage.getItem("gameStartDate")) 
      : (() => {
          const now = new Date();
          now.setHours(7, 0, 0, 0); // —Å—Ç–∞—Ä—Ç –≤ 7:00 —É—Ç—Ä–∞
          localStorage.setItem("gameStartDate", now.toISOString());
          return now;
        })();

    function isDayUnlocked(dayNumber) {
      const now = new Date();
      const unlockDate = new Date(startDate);
      const dayOffset = dayNumber > 30 ? 2.5 : dayNumber - 1;
      unlockDate.setDate(unlockDate.getDate() + Math.floor(dayOffset));
      unlockDate.setHours(dayNumber > 30 ? 19 : 7, 0, 0, 0);
      return now >= unlockDate;
    }

    function loadDayContent(dayNumber) {
      if (!isDayUnlocked(dayNumber)) return;

      document.querySelectorAll("#daysList li").forEach(li => li.classList.remove("active"));
      document.querySelector(`#daysList li[data-day='${dayNumber}']`)?.classList.add("active");

      document.getElementById("dayTitle").textContent = titles[dayNumber] || `–î–µ–Ω—å ${dayNumber}`;

      fetch(`./days/day${dayNumber}.txt`)
        .then(response => response.ok ? response.text() : Promise.reject("–ù–µ–º–∞—î —Ñ–∞–π–ª–∞"))
        .then(text => {
          document.getElementById("dayContent").innerText = text;
        })
        .catch(() => {
          document.getElementById("dayContent").innerText = "–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ü—å–æ–≥–æ –¥–Ω—è –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ.";
        });

      loadDayAssets(dayNumber);
    }

    function loadDayAssets(dayNumber) {
      const dayAssets = document.getElementById("dayAssets");
      dayAssets.innerHTML = "";

      if (photoDays.includes(dayNumber)) {
        const img = document.createElement("img");
        img.src = `./assets/images/day${dayNumber}.jpg`;
        img.alt = `–§–æ—Ç–æ –¥–ª—è –¥–Ω—è ${dayNumber}`;
        img.className = "asset-image";
        dayAssets.appendChild(img);
      }

      if (audioDays.includes(dayNumber)) {
        const audio = document.createElement("audio");
        audio.controls = true;
        audio.src = `./assets/audio/day${dayNumber}.mp3`;
        audio.className = "asset-audio";
        dayAssets.appendChild(audio);
      }

      if (pdfDays.includes(dayNumber)) {
        const pdfLink = document.createElement("a");
        pdfLink.href = `./assets/pdf/day${dayNumber}.pdf`;
        pdfLink.target = "_blank";
        pdfLink.textContent = "üìÑ PDF —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –¥–Ω—è";
        pdfLink.className = "asset-pdf";
        dayAssets.appendChild(pdfLink);
      }
    }

    function renderDays() {
      const daysList = document.getElementById("daysList");
      daysList.innerHTML = '';

      for (let i = 1; i <= 30; i++) {
        addDayItem(i);
        if (i === 3) addDayItem(31); // –≤–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ 3 –¥–µ–Ω—å
      }
    }

    function addDayItem(dayNumber) {
      const li = document.createElement("li");
      li.textContent = titles[dayNumber] || `–î–µ–Ω—å ${dayNumber}`;
      li.dataset.day = dayNumber;

      if (isDayUnlocked(dayNumber)) {
        li.onclick = () => loadDayContent(dayNumber);
      } else {
        li.classList.add("locked");
      }

      document.getElementById("daysList").appendChild(li);
    }

    renderDays();
    loadDayContent(1); // –ù–∞—á–∏–Ω–∞–µ–º —Å –¥–Ω—è 1
  </script>
</body>
</html>
