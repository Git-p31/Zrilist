<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì—Ä–∞ ‚Äî –®–ª—è—Ö –∑—Ä—ñ–ª–æ—Å—Ç—ñ</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .container { display: flex; height: 100vh; }
    .sidebar { width: 300px; background: #f4f4f4; padding: 20px; overflow-y: auto; }
    .content { flex: 1; padding: 20px; }
    ul { list-style: none; padding: 0; }
    li { padding: 8px 12px; margin-bottom: 6px; cursor: pointer; border-radius: 4px; }
    li.locked { color: #888; cursor: default; background: #eee; }
    li.unlocked:hover { background: #cce5ff; }
    li.active { background: #007bff; color: white; }
    .timer { font-size: 0.9em; color: #555; margin-left: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2>–î–Ω—ñ –≥—Ä–∏</h2>
      <ul id="daysList"></ul>
    </aside>
    <main class="content">
      <h1 id="dayTitle">–í–∏–±–µ—Ä—ñ—Ç—å –¥–µ–Ω—å</h1>
      <p id="dayContent">–ö–æ–Ω—Ç–µ–Ω—Ç –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç –ø—ñ—Å–ª—è –≤–∏–±–æ—Ä—É –¥–Ω—è.</p>
      <div id="dayAssets"></div>
    </main>
  </div>

<script>
const titles = {
  "0": "üå± –ü–µ—Ä–µ–¥—Å—Ç–∞—Ä—Ç",
  "1": "‚ú® –î–ï–ù–¨ 1 ‚Äì –¢–æ—á–∫–∞ –ê",
  "1.1": "üåô –í–µ—á—ñ—Ä–Ω—î –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è ‚Äì –î–µ–Ω—å 1",
  "2": "üìå –î–ï–ù–¨ 2. –¢–í–û–á –¶–Ü–ù–ù–û–°–¢–Ü ‚Äì –¢–í–û–Ø –°–£–ü–ï–†–°–ò–õ–ê!",
  "3": "üìå –î–ï–ù–¨ 3. –î–û–†–û–°–õ–Ü–°–¢–¨ ‚Äì –¶–ï –°–ú–Ü–õ–ò–í–Ü–°–¢–¨ –ë–£–¢–ò –°–û–ë–û–Æ",
  "31": "üåô –í–µ—á—ñ—Ä–Ω—î –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è ‚Äì –î–µ–Ω—å 3",
  "4": "üìå –î–ï–ù–¨ 4. –ü–ï–†–ï–ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –¢–ê –ü–Ü–î–°–£–ú–ö–ò –ë–õ–û–ö–£",
  "5": "üìå –î–ï–ù–¨ 5. –¢–í–û–á –ï–ú–û–¶–Ü–á ‚Äì –¶–ï –¢–í–û–á –Ü–ù–°–¢–†–£–ú–ï–ù–¢–ò",
  "6": "üìå –î–ï–ù–¨ 6. –ü–†–ò–†–£–ß–ò –°–í–û–á –ï–ú–û–¶–Ü–á",
  "7": "üìå –î–ï–ù–¨ 7. –ï–ú–û–¶–Ü–ô–ù–Ü –ö–û–†–î–û–ù–ò",
  "8": "üìå –î–ï–ù–¨ 8. –ï–ú–û–¶–Ü–ô–ù–ê –ê–í–¢–û–ù–û–ú–Ü–Ø",
  "9": "üìå –î–ï–ù–¨ 9. –§–Ü–ù–ê–ù–°–û–í–ò–ô –°–¶–ï–ù–ê–†–Ü–ô",
  "10": "üìå –î–ï–ù–¨ 10. –ì–†–û–®–Ü = –í–Ü–î–ü–û–í–Ü–î–ê–õ–¨–ù–Ü–°–¢–¨",
  "11": "üìå –î–ï–ù–¨ 11. –¢–ò –ö–ï–†–£–Ñ–® –ì–†–û–®–ò–ú–ê",
  "12": "üìå –î–ï–ù–¨ 12. –¢–ò –í–ó–Ø–í –ö–û–ù–¢–†–û–õ–¨ –ù–ê–î –ì–†–û–®–ò–ú–ê!",
  "13": "üìå –î–ï–ù–¨ 13. –¶–ï –ù–ï –Ø, –¶–ï –ó–Ü–†–ö–ò‚Ä¶",
  "14": "üìå –î–ï–ù–¨ 14. –Ø –í–ò–†–Ü–®–£–Æ",
  "15": "üìå –î–ï–ù–¨ 15. –í–Ü–î–ü–û–í–Ü–î–ê–õ–¨–ù–Ü–°–¢–¨ ‚â† –°–ê–ú–û–ü–û–ñ–ï–†–¢–í–ê",
  "16": "üìå –î–ï–ù–¨ 16. –ó–ê–ü–ê–ö–£–ô –°–í–Ü–ô –í–ò–ë–Ü–†",
  "16.1": "üåô –í–µ—á—ñ—Ä–Ω—ñ–π —Ñ—ñ–¥–±–µ–∫ ‚Äì –ø—ñ—Å–ª—è –¥–Ω—è 16",
  "17": "üìå –î–ï–ù–¨ 17. –¢–Ø–ì–ù–£ –¢–ï–ë–ï, –ê–ë–û –õ–Æ–ë–õ–Æ?",
  "18": "üìå –î–ï–ù–¨ 18. –ú–û–ñ–ù–ê –ù–ï –í–Ü–î–ö–†–ò–í–ê–¢–ò –î–í–ï–†–Ü‚Ä¶",
  "19": "üìå –î–ï–ù–¨ 19. –ó–†–Ü–õ–ê –ö–û–ú–£–ù–Ü–ö–ê–¶–Ü–Ø",
  "20": "üìå –î–ï–ù–¨ 20. –°–¢–û–°–£–ù–ö–ò",
  "21": "üìå –î–ï–ù–¨ 21. –¢–Ü–õ–û ‚Äî –¶–ï –ù–ï –£–ü–ê–ö–û–í–ö–ê‚Ä¶",
  "22": "üìå –î–ï–ù–¨ 22. –ó–í–ò–ß–ö–ò",
  "23": "üìå –î–ï–ù–¨ 23. –ö–£–î–ò –ó–ù–ò–ö–ê–Ñ –ú–û–Ø –ï–ù–ï–†–ì–Ü–Ø?",
  "24": "üìå –î–ï–ù–¨ 24. –Ø –ë–Ü–õ–¨–®–ï –ù–ï –ñ–ò–í–£",
  "25": "üìå –î–ï–ù–¨ 25. –ü–õ–ê–ù –í–ü–ê–í. –Ø ‚Äì –ù–Ü.",
  "26": "üìå –î–ï–ù–¨ 26. –ö–û–õ–ò –í–°–ï –†–û–ó–°–ò–ü–ê–Ñ–¢–¨–°–Ø‚Ä¶",
  "27": "üìå –î–ï–ù–¨ 27. –ù–ï –¢–Ü–õ–¨–ö–ò –í–ò–¢–†–ò–ú–ê–¢–ò",
  "28": "üìå –î–ï–ù–¨ 28. –ö–û–õ–ò –ù–ê–ö–†–ò–í–ê–Ñ‚Ä¶",
  "29": "üìå –î–µ–Ω—å 29 ‚Äî –Ø –±–∞—á—É —Å–≤—ñ–π —à–ª—è—Ö",
  "30": "üéØ –î–ï–ù–¨ 30 ‚Äî –¢–û–ß–ö–ê –ë",
  "32": "üéâ –ü–Ü–î–°–£–ú–ö–û–í–ò–ô –§–Ü–î–ë–ï–ö ‚Äì –ö–Ü–ù–ï–¶–¨ –®–õ–Ø–•–£"
};

const dayOrder = [
  "0", "1", "1.1", "2", "3", "31", "4", "5", "6", "7", "8",
  "9", "10", "11", "12", "13", "14", "15", "16", "16.1",
  "17", "18", "19", "20", "21", "22", "23", "24", "25",
  "26", "27", "28", "29", "30", "32"
];

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞—Ç—É –Ω–∞—á–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
if (!localStorage.getItem("startDate")) {
  localStorage.setItem("startDate", new Date().toISOString());
}
const userStartDate = new Date(localStorage.getItem("startDate"));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—á–µ—Ä–Ω–µ–≥–æ –¥–Ω—è
function isEveningDay(key) {
  return key.includes(".") || ["31", "16.1", "32"].includes(key);
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞—Ç—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
function getUnlockDate(key) {
  const baseDay = Math.floor(parseFloat(key));
  const unlock = new Date(userStartDate);
  unlock.setDate(unlock.getDate() + baseDay);
  unlock.setHours(isEveningDay(key) ? 19 : 7, 0, 0, 0);
  return unlock;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–Ω—è
function isDayUnlocked(key) {
  if (["0", "1", "1.1"].includes(key)) return true;
  const now = new Date();
  return now >= getUnlockDate(key);
}

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏
function formatTimeLeft(ms) {
  if (ms <= 0) return "0–≥ 0—Ö–≤";
  const totalSeconds = Math.floor(ms / 1000);
  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  return `${hours}–≥ ${minutes}—Ö–≤`;
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–Ω–µ–π
function renderDays() {
  const list = document.getElementById("daysList");
  list.innerHTML = "";

  dayOrder.forEach(key => {
    const li = document.createElement("li");
    li.dataset.day = key;
    li.textContent = titles[key] || `–î–µ–Ω—å ${key}`;

    if (isDayUnlocked(key)) {
      li.classList.add("unlocked");
      li.onclick = () => loadDayContent(key);
    } else {
      li.classList.add("locked");
      const diff = getUnlockDate(key) - new Date();
      li.innerHTML = `${titles[key]} <span class="timer">üîí –ß–µ—Ä–µ–∑ ${formatTimeLeft(diff)}</span>`;
    }

    list.appendChild(li);
  });
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–Ω—è
function loadDayContent(key) {
  document.querySelectorAll("#daysList li").forEach(li => li.classList.remove("active"));
  const activeLi = document.querySelector(`#daysList li[data-day="${key}"]`);
  if (activeLi) activeLi.classList.add("active");

  document.getElementById("dayTitle").textContent = titles[key] || `–î–µ–Ω—å ${key}`;

  fetch(`./days/day${key}.txt`)
    .then(res => res.ok ? res.text() : Promise.reject())
    .then(text => {
      document.getElementById("dayContent").innerText = text.trim() || "–ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ.";
    })
    .catch(() => {
      document.getElementById("dayContent").innerText = "–ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ.";
    });

  document.getElementById("dayAssets").innerHTML = "";
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤
function updateTimers() {
  document.querySelectorAll("#daysList li.locked").forEach(li => {
    const key = li.dataset.day;
    const diff = getUnlockDate(key) - new Date();
    if (diff <= 0) {
      renderDays();
    } else {
      const timer = li.querySelector(".timer");
      if (timer) timer.textContent = `üîí –ß–µ—Ä–µ–∑ ${formatTimeLeft(diff)}`;
    }
  });
}

renderDays();
setInterval(updateTimers, 60000);
</script>
</body>
</html>
